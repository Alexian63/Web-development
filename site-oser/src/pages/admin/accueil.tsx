import { useSession } from "next-auth/react";
import { useEffect } from "react";
import { useRouter } from "next/router";
import Navbar from "../../components/Navbar";
import Link from 'next/link';
import "../../styles/admin.css"; // Importation du fichier CSS global

const admin = () => {
  const { data: session, status} = useSession();
  const router = useRouter();
  const icon_excel = <svg xmlns="http://www.w3.org/2000/svg" className="svg-image" viewBox="0 0 50 50" width="50px" height="50px"><g fill="currentColor"><path d="M 28.875 0 C 28.855469 0.0078125 28.832031 0.0195313 28.8125 0.03125 L 0.8125 5.34375 C 0.335938 5.433594 -0.0078125 5.855469 0 6.34375 L 0 43.65625 C -0.0078125 44.144531 0.335938 44.566406 0.8125 44.65625 L 28.8125 49.96875 C 29.101563 50.023438 29.402344 49.949219 29.632813 49.761719 C 29.859375 49.574219 29.996094 49.296875 30 49 L 30 44 L 47 44 C 48.09375 44 49 43.09375 49 42 L 49 8 C 49 6.90625 48.09375 6 47 6 L 30 6 L 30 1 C 30.003906 0.710938 29.878906 0.4375 29.664063 0.246094 C 29.449219 0.0546875 29.160156 -0.0351563 28.875 0 Z M 28 2.1875 L 28 6.53125 C 27.867188 6.808594 27.867188 7.128906 28 7.40625 L 28 42.8125 C 27.972656 42.945313 27.972656 43.085938 28 43.21875 L 28 47.8125 L 2 42.84375 L 2 7.15625 Z M 30 8 L 47 8 L 47 42 L 30 42 L 30 37 L 34 37 L 34 35 L 30 35 L 30 29 L 34 29 L 34 27 L 30 27 L 30 22 L 34 22 L 34 20 L 30 20 L 30 15 L 34 15 L 34 13 L 30 13 Z M 36 13 L 36 15 L 44 15 L 44 13 Z M 6.6875 15.6875 L 12.15625 25.03125 L 6.1875 34.375 L 11.1875 34.375 L 14.4375 28.34375 C 14.664063 27.761719 14.8125 27.316406 14.875 27.03125 L 14.90625 27.03125 C 15.035156 27.640625 15.160156 28.054688 15.28125 28.28125 L 18.53125 34.375 L 23.5 34.375 L 17.75 24.9375 L 23.34375 15.6875 L 18.65625 15.6875 L 15.6875 21.21875 C 15.402344 21.941406 15.199219 22.511719 15.09375 22.875 L 15.0625 22.875 C 14.898438 22.265625 14.710938 21.722656 14.5 21.28125 L 11.8125 15.6875 Z M 36 20 L 36 22 L 44 22 L 44 20 Z M 36 27 L 36 29 L 44 29 L 44 27 Z M 36 35 L 36 37 L 44 37 L 44 35 Z"/></g></svg>
  const icon_musee = <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 512.000000 512.000000" preserveAspectRatio="xMidYMid meet"><g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="#FFFFFF" stroke="none"><path d="M2450 4415 c-65 -19 -15 9 -860 -479 -484 -280 -693 -396 -715 -396 -16 0 -48 -9 -70 -19 -152 -68 -152 -287 -2 -357 29 -13 71 -24 93 -24 l41 0 7 -69 c8 -82 34 -126 89 -156 l37 -20 0 -782 c0 -671 -2 -783 -14 -783 -21 0 -74 -47 -91 -81 -9 -16 -15 -56 -15 -94 l0 -65 -53 0 c-201 0 -282 -250 -118 -365 l43 -30 1738 0 1738 0 43 30 c164 115 83 365 -118 365 l-53 0 0 65 c0 38 -6 78 -15 94 -17 34 -70 81 -91 81 -12 0 -14 112 -14 783 l0 782 37 20 c60 32 83 76 83 156 l0 69 48 0 c107 0 200 80 210 179 11 115 -58 201 -177 220 -36 6 -210 102 -771 426 -398 230 -747 427 -774 438 -68 26 -186 31 -256 12z m185 -136 c22 -6 321 -174 665 -373 l625 -361 -683 -3 c-375 -1 -989 -1 -1364 0 l-683 3 626 362 c344 199 641 366 660 371 47 14 106 14 154 1z m1637 -896 c24 -21 23 -58 -2 -83 -20 -20 -33 -20 -1710 -20 -1677 0 -1690 0 -1710 20 -24 24 -26 57 -3 82 15 17 82 18 1711 18 1564 0 1697 -1 1714 -17z m-2754 -295 l-3 -53 -210 0 -210 0 -3 53 -3 52 216 0 216 0 -3 -52z m262 10 c0 -91 38 -163 100 -188 l30 -12 0 -784 c0 -690 -2 -784 -15 -784 -8 0 -32 -16 -54 -35 -41 -38 -61 -90 -61 -164 l0 -41 -60 0 -60 0 0 58 c0 81 -31 140 -88 167 l-41 20 -1 783 c0 680 2 782 15 782 22 0 86 61 101 97 8 18 14 57 14 88 l0 55 60 0 60 0 0 -42z m580 -1 c0 -24 -5 -48 -12 -55 -17 -17 -399 -17 -416 0 -7 7 -12 31 -12 55 l0 43 220 0 220 0 0 -43z m260 -4 c0 -75 17 -118 60 -157 22 -20 47 -36 55 -36 13 0 15 -94 15 -782 l-1 -783 -37 -17 c-56 -27 -84 -75 -90 -158 l-5 -70 -57 0 -57 0 -5 70 c-6 83 -34 131 -90 158 l-37 17 -1 783 c0 688 2 782 15 782 8 0 32 16 53 35 43 38 62 87 62 159 l0 46 60 0 60 0 0 -47z m580 4 c0 -24 -5 -48 -12 -55 -17 -17 -399 -17 -416 0 -7 7 -12 31 -12 55 l0 43 220 0 220 0 0 -43z m260 -12 c0 -31 6 -70 14 -88 15 -36 79 -97 101 -97 13 0 15 -102 15 -782 l-1 -783 -41 -20 c-57 -28 -88 -87 -88 -167 l0 -58 -60 0 -60 0 0 41 c0 74 -20 126 -61 164 -22 19 -46 35 -54 35 -13 0 -15 94 -15 784 0 765 0 785 19 791 63 20 99 78 108 170 l6 65 58 0 59 0 0 -55z m568 3 l-3 -53 -210 0 -210 0 -3 53 -3 52 216 0 216 0 -3 -52z m-2638 -973 l0 -775 -90 0 -90 0 0 775 0 775 90 0 90 0 0 -775z m840 0 l0 -775 -90 0 -90 0 0 775 0 775 90 0 90 0 0 -775z m840 0 l0 -775 -90 0 -90 0 0 775 0 775 90 0 90 0 0 -775z m840 0 l0 -775 -90 0 -90 0 0 775 0 775 90 0 90 0 0 -775z m-2392 -972 l3 -53 -215 0 -216 0 0 48 c0 27 3 52 7 56 4 3 99 5 212 4 l206 -3 3 -52z m836 41 c3 -9 6 -33 6 -55 l0 -39 -220 0 -220 0 0 39 c0 75 -11 71 220 71 180 0 209 -2 214 -16z m840 0 c3 -9 6 -33 6 -55 l0 -39 -220 0 -220 0 0 48 c0 27 3 52 7 55 3 4 100 7 214 7 179 0 208 -2 213 -16z m834 -41 l3 -53 -215 0 -216 0 0 48 c0 27 3 52 7 56 4 3 99 5 212 4 l206 -3 3 -52z m244 -210 c25 -23 23 -68 -4 -87 -20 -14 -199 -16 -1708 -16 -1509 0 -1688 2 -1708 16 -26 18 -29 60 -5 86 15 17 82 18 1711 18 1564 0 1697 -1 1714 -17z"/></g></svg>

  useEffect(() => {
    if (status === "loading") return;
    if (!session) {
      router.push("/connexion"); 
    } else if (session.user?.email !== "admin@oser-cs.fr") {
      console.log(session.user?.email);
      router.push("/access-denied"); // Redirige vers une page d'accès refusé si l'utilisateur n'est pas admin
    }
  }, [session, router]);
  const buttons = [
    { label: 'Exporter en CSV', icon: icon_excel, lien : '/admin/sorties'},
    { label: 'Créer une sortie', icon: icon_musee, lien : '/admin/sorties' },
  ];

  return (
    <div>
      <Navbar />
      <div className="button-list-container">
        {buttons.map((button, index) => (
          <Link href={button.lien} passHref>
            <button key={index} className="custom-button" style={{ userSelect: "none" }}>
              <span className="button-icon">{button.icon}</span>
              <span className="button-label">{button.label}</span>
            </button>
          </Link>
        ))}
      </div>
    </div>
  );
};

export default admin;
